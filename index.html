<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ValenTango 2026 Full Schedule</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="safe-area-bottom">

    <header class="main-header sticky top-0 z-40">
        <div class="max-w-4xl mx-auto px-5 pt-6 pb-4">
            <div class="flex justify-between items-end mb-5">
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-white">ValenTango 2026</h1>
                    <p class="text-zinc-400 text-[11px] uppercase tracking-wider font-medium">Portland, OR • Feb 11-16</p>
                </div>
                <div id="clock" class="text-[10px] font-mono text-zinc-500 uppercase pb-1">Feb 5, 2026</div>
            </div>
            
            <div class="filter-container -mx-5 px-5">
                <div class="flex gap-2 overflow-x-auto no-scrollbar pb-1">
                    <button onclick="setFilter('all')" id="filter-all" class="filter-chip active">All Events</button>
                    <button onclick="setFilter('milonga')" id="filter-milonga" class="filter-chip">Milongas</button>
                    <button onclick="setFilter('Beg')" id="filter-Beg" class="filter-chip">Beginner</button>
                    <button onclick="setFilter('Int')" id="filter-Int" class="filter-chip">Intermediate</button>
                    <button onclick="setFilter('Adv')" id="filter-Adv" class="filter-chip">Advanced</button>
                </div>
            </div>
        </div>
    </header>

    <main id="event-list" class="max-w-4xl mx-auto"></main>

    <div id="details-view" class="details-overlay">
        <div class="max-w-2xl mx-auto px-6 pt-12 pb-24">
            <button onclick="closeDetails()" class="back-button mb-8">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                <span>Back to Schedule</span>
            </button>
            <div id="details-content"></div>
        </div>
    </div>

    <script src="events.js"></script>
    <script>

        let currentFilter = 'all';

        function formatTime(iso) { return new Date(iso).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); }
        function formatDate(iso) { return new Date(iso).toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' }); }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));
            document.getElementById(`filter-${filter}`).classList.add('active');
            renderEvents();
        }

        function renderEvents() {
            const list = document.getElementById('event-list');
            list.innerHTML = '';
            
            const filtered = events.filter(e => {
                if (currentFilter === 'all') return true;
                if (currentFilter === 'milonga') return e.type === 'milonga';
                return e.level.toLowerCase().includes(currentFilter.toLowerCase());
            }).sort((a,b) => new Date(a.start) - new Date(b.start));

            let lastDate = '';
            filtered.forEach(e => {
                const dateStr = formatDate(e.start);
                if(dateStr !== lastDate) {
                    const h = document.createElement('div');
                    h.className = 'date-divider';
                    h.innerText = dateStr;
                    list.appendChild(h);
                    lastDate = dateStr;
                }

                const card = document.createElement('div');
                card.className = `event-card ${e.type === 'milonga' ? 'milonga-type' : 'class-type'}`;
                card.onclick = () => showDetails(e.id);
                card.innerHTML = `
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1.5">
                            <span class="text-zinc-500 font-mono text-[11px] font-medium">${formatTime(e.start)}</span>
                            <span class="room-tag">${e.room}</span>
                        </div>
                        <h3 class="text-[15px] font-semibold text-white leading-snug mb-1 truncate">${e.title}</h3>
                        <p class="text-[11px] text-zinc-500 font-medium uppercase tracking-tight">${e.level} • ${e.instructor}</p>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="price-tag">${e.price}</span>
                        <svg class="text-zinc-700" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function showDetails(id) {
            const e = events.find(x => x.id === id);
            const content = document.getElementById('details-content');
            
            content.innerHTML = `
                <div class="mb-6"><span class="badge ${e.type === 'milonga' ? 'badge-milonga' : 'badge-class'}">${e.type}</span></div>
                <h2 class="text-3xl font-bold mb-6 leading-tight tracking-tight">${e.title}</h2>
                <div class="grid grid-cols-2 gap-y-8 gap-x-4 mb-10 pb-10 border-b border-zinc-900">
                    <div>
                        <div class="detail-label">Time</div>
                        <div class="text-base text-white">${formatDate(e.start)}<br/>${formatTime(e.start)} - ${formatTime(e.end)}</div>
                    </div>
                    <div>
                        <div class="detail-label">Location</div>
                        <div class="text-base text-white">${e.room}</div>
                    </div>
                    <div>
                        <div class="detail-label">Instructor/Host</div>
                        <div class="text-base font-semibold text-purple-400">${e.instructor}</div>
                    </div>
                    <div>
                        <div class="detail-label">Price</div>
                        <div class="text-base font-mono text-zinc-300">${e.price}</div>
                    </div>
                </div>
                <div class="space-y-4">
                    <h3 class="detail-label">Description</h3>
                    <p class="text-zinc-400 leading-relaxed text-lg font-light">${e.description}</p>
                </div>
            `;
            const el = document.getElementById('details-view');
            el.style.display = 'block';
            setTimeout(() => el.classList.add('active'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeDetails() {
            const el = document.getElementById('details-view');
            el.classList.remove('active');
            setTimeout(() => {
                el.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        window.onload = renderEvents;
    </script>
</body>
</html>